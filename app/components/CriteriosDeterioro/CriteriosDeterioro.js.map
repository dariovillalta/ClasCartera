{"version":3,"sources":["components/CriteriosDeterioro/CriteriosDeterioro.js"],"names":["CriteriosDeterioro","props","state","idCriterioDeterioro","nombreCriterioDeterioroSeleccionado","mostrarComponente","estimacionesDeterioro","goCreateCriteria","bind","goSelectCriteria","goEditCriteria","loadCriterioDet","transaction","sql","Transaction","pool","begin","err","rolledBack","on","aborted","request","Request","query","result","console","log","rollback","commit","setState","recordset","id","nombre","localeCompare","showConfigurationComponent","React","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport sql from 'mssql';\n\nimport SeleccionarCriterioDeterioro from './SeleccionarCriterioDeterioro.js';\nimport CrearCriterioDeterioro from './CrearCriterioDeterioro.js';\n//import EditarCriterioDeterioro from './EditarCriterioDeterioro.js';\n\nexport default class CriteriosDeterioro extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            idCriterioDeterioro: -1,\n            nombreCriterioDeterioroSeleccionado: \"\",\n            mostrarComponente: \"selCrit\",\n            estimacionesDeterioro: []\n        }\n        this.goCreateCriteria = this.goCreateCriteria.bind(this);\n        this.goSelectCriteria = this.goSelectCriteria.bind(this);\n        this.goEditCriteria = this.goEditCriteria.bind(this);\n        this.loadCriterioDet = this.loadCriterioDet.bind(this);\n    }\n\n    componentDidMount() {\n        this.loadCriterioDet();\n    }\n\n    loadCriterioDet() {\n        const transaction = new sql.Transaction( this.props.pool );\n        transaction.begin(err => {\n            var rolledBack = false;\n            transaction.on('rollback', aborted => {\n                rolledBack = true;\n            });\n            const request = new sql.Request(transaction);\n            request.query(\"select * from CriterioDeterioro\", (err, result) => {\n                if (err) {\n                    if (!rolledBack) {\n                        console.log(err);\n                        transaction.rollback(err => {\n                        });\n                    }\n                } else {\n                    transaction.commit(err => {\n                        this.setState({\n                            estimacionesDeterioro: result.recordset\n                        });\n                    });\n                }\n            });\n        }); // fin transaction\n    }\n\n    goCreateCriteria () {\n        this.setState({\n            mostrarComponente: \"crearCrit\"\n        });\n    }\n\n    goSelectCriteria () {\n        this.loadCriterioDet();\n        this.setState({\n            idCriterioDeterioro: -1,\n            nombreCriterioDeterioroSeleccionado: \"\",\n            mostrarComponente: \"selCrit\"\n        });\n    }\n\n    goEditCriteria (id, nombre) {\n        this.setState({\n            idCriterioDeterioro: id,\n            nombreCriterioDeterioroSeleccionado: nombre,\n            mostrarComponente: \"editCrit\"\n        });\n    }\n\n    render() {\n        if(this.state.mostrarComponente.localeCompare(\"crearCrit\") == 0) {\n            return (\n                <div>\n                    <CrearCriterioDeterioro pool={this.props.pool} showConfigurationComponent={this.props.showConfigurationComponent} returnSelCrit={this.goSelectCriteria}> </CrearCriterioDeterioro>\n                </div>\n            );\n        } else if(this.state.mostrarComponente.localeCompare(\"selCrit\") == 0) {\n            return (\n                <div>\n                    <SeleccionarCriterioDeterioro pool={this.props.pool} showConfigurationComponent={this.props.showConfigurationComponent} seleccionarCriterio={this.goEditCriteria} goCrearCredito={this.goCreateCriteria} estimacionesDeterioro={this.state.estimacionesDeterioro}> </SeleccionarCriterioDeterioro>\n                </div>\n            );\n        } else if(this.state.mostrarComponente.localeCompare(\"editCrit\") == 0) {\n            return (\n                <div>\n                    <CrearCriterioDeterioro pool={this.props.pool} showConfigurationComponent={this.props.showConfigurationComponent} returnSelCrit={this.goSelectCriteria}> </CrearCriterioDeterioro>\n                </div>\n            );\n        }\n    }\n}\n"],"file":"CriteriosDeterioro.js"}